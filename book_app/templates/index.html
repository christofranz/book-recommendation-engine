<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Book Recommendation Egnine</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" type="text/css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="/static/styles/carousel.css" rel="stylesheet">
    <link href="/static/styles/box-shadow.css" rel="stylesheet">

    <script>

      function setCookie(name,value,days) {
          var expires = "";
          if (days) {
              var date = new Date();
              date.setTime(date.getTime() + (days*24*60*60*1000));
              expires = "; expires=" + date.toUTCString();
          }
          document.cookie = name + "=" + (value || "")  + expires + "; path=/";
      }
      
      function eraseCookie(name) {   
        document.cookie = name+'=; Max-Age=-99999999;';  
      }

      function changeBookPreference(bookId, checkbox)
      {
          if (checkbox.checked)
          {
            setCookie("like_book_" + bookId, 1);
          }
          else
          {
            eraseCookie("like_book_" + bookId);
          }
          return true
      }
    </script>

  </head>
<!-- NAVBAR
================================================== -->
  <body>
    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="/">Book Recommendation</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li role="separator" class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>

      </div>
    </div>


    <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="50000">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner" role="listbox">
        <div class="item active">
          <img class="first-slide" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="First slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>Most popular books.</h1>
              <p>Based on x y z a ranking of the most popular books is available. Click the button for more.</p>
              <p><a class="btn btn-lg btn-primary" href="bestof" role="button">Show me</a></p>
            </div>
            <form action="/bestof" method="get">
              <div class="col-lg-offset-5">
                  <button type="submit" class="btn btn-lg btn-success">Show me</button>
              </div>
            </form>
          </div>
        </div>
        <div class="item">
          <img class="second-slide" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>Find Books</h1>
              <p>Search the database by author or title. Mark books you like to get individual recommendations.</p>
              <p><a class="btn btn-lg btn-primary" href="#" role="button">Find</a></p>
            </div>
          </div>
        </div>
        <div class="item">
          <img class="third-slide" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Third slide">
          <div class="container">
            <div class="carousel-caption">
              <h1>Recommendations for existing users</h1>
              <p>Get recommendations for existing users from the database.</p>
              <p><a class="btn btn-lg btn-primary" href="#" role="button">Show me</a></p>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div><!-- /.carousel -->


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">
      {% block content %}
      <!-- Three columns of text below the carousel -->
      <div class="row">
        <div class="col-lg-4">
          <img class="img-circle" src="/static/img/githublogo.png" alt="Generic placeholder image" width="140" height="140">
          <h2>Show Recommendations</h2>
          <p>Type a user_id, I show you the corresponding recommendations.</p>
          <form action="/recommend" method="get">
            <p><input type="text" class="form-control form-control-lg" name="query" placeholder="Enter a user id"></p>
            <p><button type="submit" class="btn btn-default">Show Recommendations &raquo;</button></p>
          </form>
          <!--<p><a class="btn btn-default" href="#" role="button">Show Recommendations &raquo;</a></p>-->
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <img class="img-circle" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Generic placeholder image" width="140" height="140">
          <h2>Find Book</h2>
          <p>Enter an author and/or a title to search for books in the database.</p>
          <form class="form-group" action="/find" method="get">
            <p><input type="text" class="form-control form-control-lg" name="author" placeholder="Enter author"></p>
            <p><input type="text" class="form-control form-control-lg" name="title" placeholder="Enter title"></p>
            <p><button type="submit" class="btn btn-default">Find Books &raquo;</button></p>
          </form>
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <img class="img-fluid" src="https://images.gr-assets.com/books/1447303603m/2767052.jpg" alt="Book cover most popular book"> <!--width="140" height="140"-->
          <h2>Get Your Own Recommendations</h2>
          <p>If you have enabled cookies for this website and marked books you like, you can see your individual recommendations as well.</p>
          <p><a class="btn btn-default" href="myrecommendations" role="button">Show My Recommendations &raquo;</a></p>
        </div><!-- /.col-lg-4 -->
      </div><!-- /.row -->


      <!-- START THE FEATURETTES -->

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7">
          <h2 class="featurette-heading">The dataset. <span class="text-muted">What is used for recommendations?</span></h2>
          <p class="lead">For this book recommendation engine prototype a dataset of <b>{{n_books}}</b> books and <b>{{n_ratings}}</b> ratings of <b>{{n_users}}</b> users is used.</p>
        </div>
        <div class="col-md-5">
          <img class="featuette-image img-responsive center-block" src="/static/img/thejakartapost.jpeg" alt="jarkartapost books">
          <p><i>Source: </i><a href="https://www.thejakartapost.com/">thejakartapost.com</a></p>
        </div>
      </div>

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7 col-md-push-5">
          <h2 class="featurette-heading">Users and Ratings. <span class="text-muted">How often did the user rate a book?</span></h2>
          <p class="lead">Donec ullamcorper nulla non metus auctor fringilla. Vestibulum id ligula porta felis euismod semper. Praesent commodo cursus magna, vel scelerisque nisl consectetur. Fusce dapibus, tellus ac cursus commodo.</p>
        </div>
        <div class="col-md-5 col-md-pull-7">
          <div id="{{ids[1]}}"></div>
        </div>
      </div>

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7">
          <h2 class="featurette-heading">Books and Ratings. <span class="text-muted">How many ratings did the books get?</span></h2>
          <p class="lead">Most books have less then 1000 ratings. However, 536 books have more then 2000 ratings and the top ten books have 176851 ratings together.</p>
        </div>
        <div class="col-md-5">
          <!--<img class="featurette-image img-responsive center-block" data-src="holder.js/500x500/auto" alt="Generic placeholder image">-->
          <div id="{{ids[2]}}"></div>
        </div>
      </div>

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-7">
          <h2 class="featurette-heading">Distribution of Ratings. <span class="text-muted">How do the users rate the books?</span></h2>
          <p class="lead">The users tend to give positive feedback. The average rating for a book is 3.92, almost 4. More frequently a book got the rating 5 than 3.</p>
        </div>
        <div class="col-md-5">
          <!--<img class="featurette-image img-responsive center-block" data-src="holder.js/500x500/auto" alt="Generic placeholder image">-->
          <div id="{{ids[0]}}"></div>
        </div>
      </div>

      {% endblock %}
      <hr class="featurette-divider">
      <!-- /END THE FEATURETTES -->

      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; 2016 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>

    </div><!-- /.container -->
    

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/holder/2.9.7/holder.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
    <script type="text/javascript">
      // plots the figure with id
      // id much match the div id above in the html
      var figures = {{figuresJSON | safe}};
      var ids = {{ids | safe}};
      for(var i in figures) {
          Plotly.plot(ids[i],
              figures[i].data,
              figures[i].layout || {});
      }
    </script>
  </body>
</html>
